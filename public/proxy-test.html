<!DOCTYPE html>
<html>
  <head>
    <title>Proxy Test</title>
  </head>
  <body>
    <h1>Testing Proxy Configuration</h1>
    <button onclick="testProxy()">Test /user Endpoint via Proxy</button>
    <div id="result"></div>

    <script>
      async function testProxy() {
        const result = document.getElementById("result");
        try {
          const response = await fetch("/user", {
            method: "GET",
            headers: {
              Authorization: "Basic " + btoa("testuser:testpass"),
            },
          });
          result.innerHTML = `
                    <h3>Response:</h3>
                    <p>Status: ${response.status}</p>
                    <p>URL: ${response.url}</p>
                    <p>Headers: ${JSON.stringify([
                      ...response.headers.entries(),
                    ])}</p>
                `;
        } catch (error) {
          result.innerHTML = `<h3>Error:</h3><p>${error.message}</p>`;
        }
      }
    </script>
  </body>
</html>

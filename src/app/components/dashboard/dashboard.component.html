<div class="dashboard-container">
  <!-- Welcome Header -->
  <div class="dashboard-header">
    <div class="welcome-content">
      <div class="welcome-badge">
        <span class="flag-emoji">üáßüá©</span>
        <span>Bangladeshi Traveler</span>
      </div>
      <h1 class="welcome-title">
        Welcome back, <span class="highlight">{{currentUser?.firstName || 'Traveler'}}</span>! üåç
      </h1>
      <p class="welcome-subtitle">Ready for your next adventure? Explore beautiful Bangladesh and connect with fellow travelers.</p>
    </div>
    <div class="quick-stats" *ngIf="currentUser">
      <div class="stat-item">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-number">{{userStats.posts || 0}}</div>
          <div class="stat-label">Posts</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-number">{{userStats.followers || 0}}</div>
          <div class="stat-label">Followers</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-number">{{userStats.trips || 0}}</div>
          <div class="stat-label">Trips</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Dashboard Content -->
  <div class="dashboard-content">
    <!-- Left Column -->
    <div class="dashboard-left">
      <!-- User Profile Card -->
      <div class="user-profile-card card" *ngIf="currentUser">
        <div class="profile-header">
          <div class="user-avatar">
            <img [src]="currentUser.profileImageUrl || 'https://ui-avatars.com/api/?name=' + (currentUser.firstName || '') + '+' + (currentUser.lastName || '') + '&background=e74c3c&color=fff&size=120'" 
                 [alt]="currentUser.firstName + ' ' + currentUser.lastName">
          </div>
          <div class="profile-info">
            <h2>{{currentUser.firstName}} {{currentUser.lastName}}</h2>
            <p class="username">{{ '@' + currentUser.userName }}</p>
            <p class="location" *ngIf="currentUser.location">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              {{currentUser.location}}
            </p>
          </div>
        </div>
        <div class="profile-details" *ngIf="currentUser.bio">
          <p class="bio">{{currentUser.bio}}</p>
        </div>
        <div class="profile-actions">
          <a routerLink="/user/profile" class="btn btn-outline btn-sm">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            Edit Profile
          </a>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions card">
        <h3>Quick Actions</h3>
        <div class="action-list">
          <a routerLink="/community/new" class="action-item">
            <div class="action-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="16"/>
                <line x1="8" y1="12" x2="16" y2="12"/>
              </svg>
            </div>
            <div class="action-content">
              <span class="action-title">Create Post</span>
              <span class="action-desc">Share your travel story</span>
            </div>
          </a>
          <a routerLink="/trips/create" class="action-item">
            <div class="action-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
              </svg>
            </div>
            <div class="action-content">
              <span class="action-title">Plan Trip</span>
              <span class="action-desc">Organize your journey</span>
            </div>
          </a>
          <a routerLink="/travel-buddies/create" class="action-item">
            <div class="action-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
                <line x1="20" y1="8" x2="20" y2="14"/>
                <line x1="23" y1="11" x2="17" y2="11"/>
              </svg>
            </div>
            <div class="action-content">
              <span class="action-title">Find Travel Buddy</span>
              <span class="action-desc">Connect with travelers</span>
            </div>
          </a>
          <a routerLink="/marketplace" class="action-item">
            <div class="action-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="m1 1 4 4 13 0 1 8-12 0z"/>
              </svg>
            </div>
            <div class="action-content">
              <span class="action-title">Browse Marketplace</span>
              <span class="action-desc">Buy & sell travel gear</span>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Center Column -->
    <div class="dashboard-center">
      <!-- Recent Posts Feed -->
      <div class="recent-posts card">
        <div class="section-header">
          <h3>Recent Community Posts</h3>
          <a routerLink="/community" class="btn btn-ghost btn-sm">View All</a>
        </div>
        <div class="posts-feed" *ngIf="recentPosts.length > 0; else noPosts">
          <div class="post-item" *ngFor="let post of recentPosts">
            <div class="post-header">
              <div class="post-author">
                <img [src]="post.author?.profileImageUrl || 'https://ui-avatars.com/api/?name=' + (post.author?.firstName || '') + '+' + (post.author?.lastName || '') + '&background=random&size=40'" 
                     [alt]="post.author?.firstName + ' ' + post.author?.lastName" class="author-avatar">
                <div class="author-info">
                  <span class="author-name">{{post.author?.firstName}} {{post.author?.lastName}}</span>
                  <span class="post-time">{{formatDate(post.createdAt)}}</span>
                </div>
              </div>
            </div>
            <div class="post-content">
              <h4 class="post-title">{{post.title}}</h4>
              <p class="post-excerpt">{{post.content | slice:0:150}}...</p>
              <div class="post-tags" *ngIf="post.tags && post.tags.length > 0">
                <span class="tag" *ngFor="let tag of post.tags.slice(0, 3)">#{{tag}}</span>
              </div>
            </div>
            <div class="post-stats">
              <span class="stat">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                {{post.likes || 0}}
              </span>
              <span class="stat">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                {{post.commentCount || 0}}
              </span>
              <span class="stat">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                  <polyline points="16 6 12 2 8 6"/>
                  <line x1="12" y1="2" x2="12" y2="15"/>
                </svg>
                {{post.shares || 0}}
              </span>
            </div>
          </div>
        </div>
        <ng-template #noPosts>
          <div class="empty-state">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            <p>No recent posts found. <a routerLink="/community">Explore the community</a> to see what's happening!</p>
          </div>
        </ng-template>
      </div>

      <!-- Bangladesh Destinations -->
      <div class="bangladesh-destinations card">
        <div class="section-header">
          <h3>Explore Beautiful Bangladesh</h3>
          <span class="flag-badge">üáßüá©</span>
        </div>
        <div class="destinations-grid">
          <div class="destination-item" routerLink="/itineraries">
            <div class="destination-image">
              <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=300&h=200&fit=crop" alt="Cox's Bazar">
              <div class="destination-overlay">
                <span class="destination-label">Beach Paradise</span>
              </div>
            </div>
            <div class="destination-content">
              <h4>Cox's Bazar</h4>
              <p>World's longest beach</p>
              <div class="destination-stats">
                <span><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> 2.5K travelers</span>
              </div>
            </div>
          </div>
          
          <div class="destination-item" routerLink="/itineraries">
            <div class="destination-image">
              <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop" alt="Sundarbans">
              <div class="destination-overlay">
                <span class="destination-label">UNESCO Site</span>
              </div>
            </div>
            <div class="destination-content">
              <h4>Sundarbans</h4>
              <p>Largest mangrove forest</p>
              <div class="destination-stats">
                <span><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> 1.8K travelers</span>
              </div>
            </div>
          </div>
          
          <div class="destination-item" routerLink="/itineraries">
            <div class="destination-image">
              <img src="https://images.unsplash.com/photo-1587474260584-136574528ed5?w=300&h=200&fit=crop" alt="Sylhet">
              <div class="destination-overlay">
                <span class="destination-label">Tea Gardens</span>
              </div>
            </div>
            <div class="destination-content">
              <h4>Sylhet</h4>
              <p>Beautiful hills & tea</p>
              <div class="destination-stats">
                <span><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> 1.2K travelers</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="dashboard-right">
      <!-- Navigation Cards -->
      <div class="nav-cards">
        <a routerLink="/community" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Community</h3>
            <p>Share stories & connect</p>
          </div>
        </a>

        <a routerLink="/marketplace" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"/>
              <circle cx="20" cy="21" r="1"/>
              <path d="m1 1 4 4 13 0 1 8-12 0z"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Marketplace</h3>
            <p>Buy & sell travel gear</p>
          </div>
        </a>

        <a routerLink="/itineraries" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Itineraries</h3>
            <p>Plan your perfect trip</p>
          </div>
        </a>

        <a routerLink="/travel-buddies" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Travel Buddies</h3>
            <p>Find travel companions</p>
          </div>
        </a>

        <a routerLink="/local-guides" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="10" r="3"/>
              <path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Local Guides</h3>
            <p>Connect with locals</p>
          </div>
        </a>

        <a routerLink="/chat" class="nav-card card">
          <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
              <line x1="8" y1="21" x2="16" y2="21"/>
              <line x1="12" y1="17" x2="12" y2="21"/>
            </svg>
          </div>
          <div class="nav-content">
            <h3>Chat</h3>
            <p>Message travelers</p>
          </div>
        </a>
      </div>

      <!-- Bangladesh Weather Widget -->
      <div class="weather-widget card">
        <div class="weather-header">
          <h3>Weather in Bangladesh</h3>
          <span class="flag-emoji">üáßüá©</span>
        </div>
        <div class="weather-content">
          <div class="weather-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/>
              <line x1="12" y1="1" x2="12" y2="3"/>
              <line x1="12" y1="21" x2="12" y2="23"/>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
              <line x1="1" y1="12" x2="3" y2="12"/>
              <line x1="21" y1="12" x2="23" y2="12"/>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
            </svg>
          </div>
          <div class="weather-info">
            <div class="temperature">28¬∞C</div>
            <div class="location">Dhaka, Bangladesh</div>
            <div class="description">Partly Cloudy</div>
          </div>
        </div>
        <div class="weather-forecast">
          <div class="forecast-item">
            <span class="day">Today</span>
            <span class="temp">28¬∞C</span>
          </div>
          <div class="forecast-item">
            <span class="day">Tomorrow</span>
            <span class="temp">30¬∞C</span>
          </div>
        </div>
      </div>

      <!-- Admin Panel Link -->
      <div class="admin-panel card" *ngIf="isAdmin()">
        <div class="admin-header">
          <h3>Admin Panel</h3>
          <span class="admin-badge">Admin</span>
        </div>
        <p>Manage the platform</p>
        <a routerLink="/admin" class="btn btn-primary btn-sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
          </svg>
          Admin Dashboard
        </a>
      </div>
    </div>
  </div>
</div>
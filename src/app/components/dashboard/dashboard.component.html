<div class="dashboard-container">
  <!-- Welcome Header -->
  <div class="dashboard-header">
    <div class="welcome-content">
      <h1 class="welcome-title">
        Welcome back, <span class="highlight">{{currentUser?.firstName || 'Traveler'}}</span>! üåç
      </h1>
      <p class="welcome-subtitle">Ready for your next adventure? Explore, connect, and share your journey.</p>
    </div>
    <div class="quick-stats" *ngIf="currentUser">
      <div class="stat-item">
        <div class="stat-number">{{userStats.posts || 0}}</div>
        <div class="stat-label">Posts</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{userStats.followers || 0}}</div>
        <div class="stat-label">Followers</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{userStats.trips || 0}}</div>
        <div class="stat-label">Trips</div>
      </div>
    </div>
  </div>

  <!-- Main Dashboard Content -->
  <div class="dashboard-content">
    <!-- Left Column -->
    <div class="dashboard-left">
      <!-- User Profile Card -->
      <div class="user-profile-card card" *ngIf="currentUser">
        <div class="profile-header">
          <div class="user-avatar">
            <img src="https://ui-avatars.com/api/?name={{currentUser.firstName}}+{{currentUser.lastName}}&background=0ea5e9&color=fff&size=120" 
                 alt="{{currentUser.firstName}} {{currentUser.lastName}}" 
                 *ngIf="currentUser.profileImageUrl; else defaultAvatar">
            <ng-template #defaultAvatar>
              <div class="avatar-placeholder">
                {{currentUser.firstName?.charAt(0)}}{{currentUser.lastName?.charAt(0)}}
              </div>
            </ng-template>
          </div>
          <div class="profile-info">
            <h2>{{currentUser.firstName}} {{currentUser.lastName}}</h2>
            <p class="username">&#64;{{currentUser.userName}}</p>
            <p class="location" *ngIf="currentUser.location">
              <i class="fas fa-map-marker-alt"></i> {{currentUser.location}}
            </p>
          </div>
        </div>
        <div class="profile-details" *ngIf="currentUser.bio">
          <p class="bio">{{currentUser.bio}}</p>
        </div>
        <div class="profile-actions">
          <a routerLink="/user/profile" class="btn btn-outline btn-sm">
            <i class="fas fa-edit"></i> Edit Profile
          </a>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions card">
        <h3>Quick Actions</h3>
        <div class="action-list">
          <a routerLink="/community/new" class="action-item">
            <i class="fas fa-plus-circle"></i>
            <span>Create Post</span>
          </a>
          <a routerLink="/trips/create" class="action-item">
            <i class="fas fa-map-marked-alt"></i>
            <span>Plan Trip</span>
          </a>
          <a routerLink="/travel-buddies/create" class="action-item">
            <i class="fas fa-user-plus"></i>
            <span>Find Travel Buddy</span>
          </a>
          <a routerLink="/marketplace" class="action-item">
            <i class="fas fa-store"></i>
            <span>Browse Marketplace</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Center Column -->
    <div class="dashboard-center">
      <!-- Recent Posts Feed -->
      <div class="recent-posts card">
        <div class="section-header">
          <h3>Recent Community Posts</h3>
          <a routerLink="/community" class="btn btn-ghost btn-sm">View All</a>
        </div>
        <div class="posts-feed" *ngIf="recentPosts.length > 0; else noPosts">
          <div class="post-item" *ngFor="let post of recentPosts">
            <div class="post-header">
              <div class="post-author">
            <img src="https://ui-avatars.com/api/?name={{post.author?.firstName}}+{{post.author?.lastName}}&background=random&size=40" 
                 alt="{{post.author?.firstName}} {{post.author?.lastName}}" class="author-avatar">
                <div class="author-info">
                  <span class="author-name">{{post.author?.firstName}} {{post.author?.lastName}}</span>
                  <span class="post-time">{{formatDate(post.createdAt)}}</span>
                </div>
              </div>
            </div>
            <div class="post-content">
              <h4 class="post-title">{{post.title}}</h4>
              <p class="post-excerpt">{{post.content | slice:0:150}}...</p>
              <div class="post-tags" *ngIf="post.tags && post.tags.length > 0">
                <span class="tag" *ngFor="let tag of post.tags.slice(0, 3)">#{{tag}}</span>
              </div>
            </div>
            <div class="post-stats">
              <span class="stat"><i class="fas fa-heart"></i> {{post.likes || 0}}</span>
              <span class="stat"><i class="fas fa-comment"></i> {{post.commentCount || 0}}</span>
              <span class="stat"><i class="fas fa-share"></i> {{post.shares || 0}}</span>
            </div>
          </div>
        </div>
        <ng-template #noPosts>
          <div class="empty-state">
            <i class="fas fa-newspaper"></i>
            <p>No recent posts found. <a routerLink="/community">Explore the community</a> to see what's happening!</p>
          </div>
        </ng-template>
      </div>

      <!-- Travel Recommendations -->
      <div class="recommendations card">
        <div class="section-header">
          <h3>Recommended for You</h3>
        </div>
        <div class="recommendation-grid">
          <div class="recommendation-item">
            <div class="rec-icon">
              <i class="fas fa-map"></i>
            </div>
            <div class="rec-content">
              <h4>Popular Destinations</h4>
              <p>Discover trending travel spots</p>
            </div>
          </div>
          <div class="recommendation-item">
            <div class="rec-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="rec-content">
              <h4>Travel Buddies</h4>
              <p>Find companions for your next trip</p>
            </div>
          </div>
          <div class="recommendation-item">
            <div class="rec-icon">
              <i class="fas fa-camera"></i>
            </div>
            <div class="rec-content">
              <h4>Photo Spots</h4>
              <p>Best places to capture memories</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="dashboard-right">
      <!-- Navigation Cards -->
      <div class="nav-cards">
        <a routerLink="/community" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-comments"></i>
          </div>
          <div class="nav-content">
            <h3>Community</h3>
            <p>Share stories & connect</p>
          </div>
        </a>

        <a routerLink="/marketplace" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-shopping-bag"></i>
          </div>
          <div class="nav-content">
            <h3>Marketplace</h3>
            <p>Buy & sell travel gear</p>
          </div>
        </a>

        <a routerLink="/itineraries" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-route"></i>
          </div>
          <div class="nav-content">
            <h3>Itineraries</h3>
            <p>Plan your perfect trip</p>
          </div>
        </a>

        <a routerLink="/travel-buddies" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-user-friends"></i>
          </div>
          <div class="nav-content">
            <h3>Travel Buddies</h3>
            <p>Find travel companions</p>
          </div>
        </a>

        <a routerLink="/local-guides" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-map-marked-alt"></i>
          </div>
          <div class="nav-content">
            <h3>Local Guides</h3>
            <p>Connect with locals</p>
          </div>
        </a>

        <a routerLink="/chat" class="nav-card card">
          <div class="nav-icon">
            <i class="fas fa-comments"></i>
          </div>
          <div class="nav-content">
            <h3>Chat</h3>
            <p>Message travelers</p>
          </div>
        </a>
      </div>

      <!-- Weather Widget -->
      <div class="weather-widget card">
        <h3>Weather</h3>
        <div class="weather-content">
          <div class="weather-icon">
            <i class="fas fa-sun"></i>
          </div>
          <div class="weather-info">
            <div class="temperature">22¬∞C</div>
            <div class="location">Current Location</div>
            <div class="description">Sunny</div>
          </div>
        </div>
      </div>

      <!-- Admin Panel Link -->
      <div class="admin-panel card" *ngIf="isAdmin()">
        <h3>Admin Panel</h3>
        <p>Manage the platform</p>
        <a routerLink="/admin" class="btn btn-primary btn-sm">
          <i class="fas fa-cog"></i> Admin Dashboard
        </a>
      </div>
    </div>
  </div>
</div>